(function(){define(["jquery","gcviz-vm-inset"],function(c,b){var a;a=function(z){var q=z.mapframe,s=z.insetframe,k=q.id,h=q.size,e=s.insets.length,l=s.size,n,j,A,x,i,f,v,u,o,g,p,w,d,m,t;j=h.width/l.numcol;A=(h.height-80)/l.numrow;while(e--){x=s.insets[e],i=x.pos.startrowcol,f=x.pos.endrowcol,v=(f[1]-i[1])*j,u=(f[0]-i[0])*A,o=(i[0]*A)+40,g=i[1]*j,p=x.label,w="";if(v===0){v=j}if(u===0){u=A}t="";if(o!==40&&g!==0){t="margin: -0.25rem;"}z.find(".gcviz-tbfoot").before('<div id="inset'+e+k+'" data-bind="click: insetClick" class="gcviz-inset gcviz-inset'+k+'" tabindex="1" style="'+t+" bottom: "+o+"px; left: "+g+"px; width: "+v+"px; height: "+u+'px;"></div>');n=z.find("#inset"+e+k);w="<h2>"+p.value+"</h2>";if(x.type==="image"||x.type==="video"){d=x.inset.sources,m=d.length;n.vSource=[];if(x.type==="image"){n.vType="image";w+='<div style="width: 100%;"><div id="slides'+e+k+'" style="height: '+(u-20)+'px;">';while(m--){var y=d[m].label;w+='<a class="lb-'+k+"_"+e+'" data-bind="attr:{href: img['+m+']}" data-lightbox="lb-'+k+"_"+e+'" title="'+y.value+'"><img class="gcviz-img-inset" data-bind="attr:{src: img['+m+']}" alt="'+y.alttext+'"></img></a>';n.vSource[m]=d[m].image}w+="</div></div>"}else{if(x.type==="video"){n.vType="video";w+='<video id="test" class="gcviz-vid-inset" style="height: '+(u-20)+'px;">';while(m--){w+='<source data-bind="attr:{src: vid['+m+']}" type="'+d[m].type+'"></source>';n.vSource[m]=d[m]}w+="</video>"}}}else{if(x.type==="html"){var r=x.inset;n.vType="html";if(r.type==="text"){w+='<div class="gcviz-html-inset">'+r.tag+"</div>"}else{if(r.type==="page"){w+='<iframe class="gcviz-html-inset" src="'+r.tag+'" style="height: '+(u-20)+'px;"></iframe>'}}}}n.append(w);b.initialize(n,k)}};return{initialize:a}})}).call(this);