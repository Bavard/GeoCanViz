(function(){define(["jquery","gcviz-vm-tbanno","dijit/TitlePane","gcviz-i18n"],function(e,c,b,d){var a;a=function(i){var h,g=i.toolbaranno,f=i.mapframe.id,k,j="";k=new b({id:"tbanno"+f,title:"Annotation",content:'<div class="gcviz-tbanno-content gcviz-tbcontent"></div>',open:false});i.find(".gcviz-tbholder").append(k.domNode);k.startup();k.domNode.getElementsByClassName("dijitTitlePaneTitleFocus")[0].setAttribute("tabindex","1");h=i.find(".gcviz-tbanno-content");if(g.drawline.enable){j+='<button class="gcviz-button" tabindex="1" data-bind="click: drawClick, tooltip: { content: tpDraw }"><img class="gcviz-img-button" data-bind="attr:{src: imgDraw}"></img></button>'}if(g.drawtext.enable){j+='<button class="gcviz-button" tabindex="1" data-bind="click: textClick, tooltip: { content: tpText }"><img class="gcviz-img-button" data-bind="attr:{src: imgText}"></img></button>';if(e("#gcviz-anno-inputbox").length===0){e("body").prepend('<div id="gcviz-anno-inputbox"><form><fieldset><label for="value">'+d.getDict("%toolbaranno-inputbox-label")+'</label> <input id="value" class="text ui-widget-content ui-corner-all"/></fieldset></form></div>')}}j+='<button class="gcviz-button" tabindex="1" data-bind="click: eraseClick, tooltip: { content: tpErase }"><img class="gcviz-img-button" data-bind="attr:{src: imgErase}"></img></button>';if(g.measure.enable){j+='<button class="gcviz-button" tabindex="1" data-bind="click: measureClick"><img class="gcviz-img-button" data-bind="attr:{src: imgMeasure}"></img></button>'}if(g.importexport.enable){j+='<button class="gcviz-button" tabindex="1" data-bind="click: importClick"><img class="gcviz-img-button" data-bind="attr:{src: imgImport}"></img></button>';j+='<button class="gcviz-button" tabindex="1" data-bind="click: exportClick"><img class="gcviz-img-button" data-bind="attr:{src: imgExport}"></img></button>'}h.append(j);c.initialize(h,f)};return{initialize:a}})}).call(this);