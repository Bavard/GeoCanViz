(function(){define([],function(){var e,c,b,h,g,f,a,d,j=[],i;e=function(q,k){var p=k.extent,m=k.sr.wkid,l=new esri.geometry.Extent({xmin:p.xmin,ymin:p.ymin,xmax:p.xmax,ymax:p.ymax,spatialReference:{wkid:m}}),n,o;n=new esri.Map(q,{extent:l,spatialReference:{wkid:m},logo:false,showAttribution:false,isPanArrows:true,fitExtent:false});n.vInitExtent=l;o=q.split("_");n.vIdName=o[0];n.vIdIndex=Number(o[1]);if(k.link){j.push(n.vIdName);b(n)}return n};c=function(l,k){Object.keys(mapArray).forEach(function(n){if(n!==l&&j.indexOf(n)!==-1){var m=mapArray[n][0];m.setExtent(mapArray[l][k].extent,m.spatialReference)}})};b=function(k){k.on("extent-change",i(function(l){if(l.target.id===document.activeElement.id){c(l.target.vIdName,Number(l.target.vIdIndex))}},1000,false));k.on("mouse-out",i(function(l){var m=l.target.id.split("_");c(m[0],Number(m[1]))},1000,false))};i=function(n,k,l){var o;return function m(){var r=this,q=arguments;function p(){if(!l){n.apply(r,q)}o=null}if(o){clearTimeout(o)}else{if(l){n.apply(r,q)}}o=setTimeout(p,k||100)}};h=function(m,l,k){if(l==="tiled"){m.addLayer(new esri.layers.ArcGISTiledMapServiceLayer(k))}else{if(l==="dynamic"){m.addLayer(new esri.layers.ArcGISDynamicMapServiceLayer(k))}}};g=function(n){var m=f(n),l,k=m.length;while(k--){l=m[k];l.resize();l.setExtent(l.getLayer(l.layerIds[0]).initialExtent,true)}};f=function(k){return mapArray[k]};a=function(){};d=function(){};return{createMap:e,addLayer:h,resizeMap:g}})}());