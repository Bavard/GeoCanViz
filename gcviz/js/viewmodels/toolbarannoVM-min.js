(function(){define(["knockout","jqueryui","gcviz-i18n","gcviz-gisgraphic"],function(b,d,c,e){var a;a=function(h,f){var g=function(k,o){var p=this,j=locationPath+"gcviz/images/annoDraw.png",l=locationPath+"gcviz/images/annoText.png",r=locationPath+"gcviz/images/annoErase.png",s=locationPath+"gcviz/images/annoMeasure.png",q=locationPath+"gcviz/images/annoImport.png",n=locationPath+"gcviz/images/annoExport.png",i=mapArray[o][0],m=new e.initialize(i);p.imgDraw=b.observable(j);p.imgText=b.observable(l);p.imgErase=b.observable(r);p.imgMeasure=b.observable(s);p.imgImport=b.observable(q);p.imgExport=b.observable(n);p.tpDraw=c.getDict("%toolbaranno-tpdraw");p.tpText=c.getDict("%toolbaranno-tptext");p.tpErase=c.getDict("%toolbaranno-tperase");p.mapid=o;p.graphic=m;$("#gcviz-anno-inputbox").dialog({autoOpen:false,modal:true,resizable:false,draggable:false,show:"fade",hide:"fade",closeOnEscape:true,title:"Annotation",width:400,close:function(){$("#value").val("")},buttons:[{text:"Ok",click:function(){var v=$("#value").val(),t=$("#gcviz-anno-inputbox"),u=t.dialog("option","mapid"),w=t.dialog("option","graphic");if(v!==""){$("#"+u+"_0_container").addClass("gcviz-text-cursor");w.drawText(v)}$(this).dialog("close")}},{text:"Cancel",click:function(){$(this).dialog("close")}}]});p.init=function(){return{controlsDescendantBindings:true}};p.drawClick=function(){$("#"+o+"_0_container").addClass("gcviz-draw-cursor");p.graphic.drawLine()};p.textClick=function(){var t=$("#gcviz-anno-inputbox");t.dialog("open");t.dialog("option",{graphic:p.graphic,mapid:p.mapid})};p.eraseClick=function(){m.erase()};p.measureClick=function(){};p.importClick=function(){};p.exportClick=function(){};p.init()};b.applyBindings(new g(h,f),h[0])};return{initialize:a}})}).call(this);