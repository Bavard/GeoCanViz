(function(){define(["jquery","knockout","jqueryui","gcviz-i18n","gcviz-gisgraphic"],function(e,b,d,c,f){var a;a=function(i,g){var h=function(l,p){var q=this,k=locationPath+"gcviz/images/annoDraw.png",m=locationPath+"gcviz/images/annoText.png",s=locationPath+"gcviz/images/annoErase.png",t=locationPath+"gcviz/images/annoMeasure.png",r=locationPath+"gcviz/images/annoImport.png",o=locationPath+"gcviz/images/annoExport.png",j=mapArray[p][0],n=new f.initialize(j);q.imgDraw=b.observable(k);q.imgText=b.observable(m);q.imgErase=b.observable(s);q.imgMeasure=b.observable(t);q.imgImport=b.observable(r);q.imgExport=b.observable(o);q.tpDraw=c.getDict("%toolbaranno-tpdraw");q.tpText=c.getDict("%toolbaranno-tptext");q.tpErase=c.getDict("%toolbaranno-tperase");q.mapid=p;q.graphic=n;e("#gcviz-anno-inputbox").dialog({autoOpen:false,modal:true,resizable:false,draggable:false,show:"fade",hide:"fade",closeOnEscape:true,title:"Annotation",width:400,close:function(){e("#value").val("")},buttons:[{text:"Ok",click:function(){var w=e("#value").val(),u=e("#gcviz-anno-inputbox"),v=u.dialog("option","mapid"),x=u.dialog("option","graphic");if(w!==""){e("#"+v+"_0_container").addClass("gcviz-text-cursor");x.drawText(w)}e(this).dialog("close")}},{text:"Cancel",click:function(){e(this).dialog("close")}}]});q.init=function(){return{controlsDescendantBindings:true}};q.drawClick=function(){e("#"+p+"_0_container").addClass("gcviz-draw-cursor");q.graphic.drawLine()};q.textClick=function(){var u=e("#gcviz-anno-inputbox");u.dialog("open");u.dialog("option",{graphic:q.graphic,mapid:q.mapid})};q.eraseClick=function(){n.erase()};q.measureClick=function(){};q.importClick=function(){};q.exportClick=function(){};q.init()};b.applyBindings(new h(i,g),i[0])};return{initialize:a}})}).call(this);